---
title: "Environmental Data Science Lab - Research Highlights"
output: 
  flexdashboard::flex_dashboard:
    storyboard: true
    social: menu
    source_code: https://github.com/bbest/csuci-invite/blob/master/docs/index.Rmd
    css: styles.css
editor_options: 
  chunk_output_type: console
---

```{r setup, include=FALSE}
library(flexdashboard)
```

```{r load}
library(tidyverse)
library(leaflet)
library(mapview)
library(mapedit)
library(sf)
library(here)
library(glue)
library(fs)
library(vembedr)
library(bsplus)
#library(icon) # remotes::install_github("ropenscilabs/icon")
source(here("functions.R"))

# paths
pts_csv <- here("data/pts.csv")

# read csv, convert to points
pts <- read_csv(pts_csv) %>% 
  st_as_sf(
    coords = c("lon", "lat"), remove=F, 
    crs=4326)
```

### **Welcome** {data-commentary-width=318}

```{r map-all}
map_all(pts)
```

*** 

Ahoy Mateys! I be talking like a pirate because I use the scientific programming language **R** to solve _**environmental problems**_, and I want to get you _hooked_ on _**data science**_.

```{r}
embed_youtube("AG4YGh1FjFc", width=300)
```

Here are few highlights of research I do on this site.

### **Route** ships around whale hotspots {data-commentary-width=318}

<iframe style="position: absolute; width: 100%; height: 100%; border: none" src='http://shiny.env.duke.edu/bbest/routing'></iframe>

*** 
<center>
![](https://ecoquants.com/images/app_routing_card_300x300_100dpi.png)
</center>

`r icon("info")` **Background**. With the possibility of an oil pipeline terminal being installed at Port Kittimat, oil tankers would transit the inner waters of British Columbia for the first time since the Exxon Valdez oil spill of 1989. Aggregating marine mammal density surfaces ([Best et al, 2015](https://archive.iwc.int/pages/terms.php?ref=5745&k=&search=%21collection15&url=pages%2Fdownload_progress.php%3Fref%3D5745%26ext%3Dpdf%26k%3D%26alternative%3D2515%26search%3D%2521collection15%26offset%3D0%26archive%3D0%26sort%3DDESC%26order_by%3Drelevance)) into a single cost surface, this least-cost routing algorithm provides alternative ship routes to avoid marine mammal hotspots.

`r icon("rocket")` **Try it out**. Click on different points along the tradeoff curve to display the corresponding route in the map. Note the routes in the upper left are straighter (i.e. less wildlife aware) than the tortuous paths in the lower right (i.e. wildlife avoidant).

### **Site** offshore wind energy responsibly {data-commentary-width=318}

<iframe style="position: absolute; width: 100%; height: 100%; border: none" src='http://shiny.env.duke.edu/bbest/siting/'></iframe>

*** 

<center>
![](https://ecoquants.com/images/app_siting_card_300x300_100dpi.png)
</center>

`r icon("info")` **Background**. Development of offshore wind energy promises to reduce greenhouse gas emissions, but environmental compliance has been estimated to take 7-10 years and only one production facility exists in the U.S. (in Block Island, NJ). Seabirds can collide or be displaced by the long-term operation of wind turbines. In contrast, cetaceans are most effected by the acoustic impact of pile driving during construction. Using existing seabird densities and recently estimated cetacean density surfaces ([Roberts, Best et al 2016](http://www.nature.com/articles/srep22615)), this decision framework maps the overall utility of wind profitability versus bird sensitivity. Clicking on any given pixel in the map pops up the cetacean sensitivity over the year for that site, thus highlighting the optimal month of the year to pile drive.

<center>
```{r}
modal_id("siting_framework")
modal_btn("siting_framework")
```
</center>

`r icon("rocket")` **Try it out**. Hover your cursor over the tradeoff plot, get the lasso tool and select optimal sites in the upper right quadrant. For the now highlighted pixels on the map, click on one of the pixels to determine the best month to pile drive based on endangered whales and dolphins being least present.

### Calculate **Ocean Health Index** globally {data-commentary-width=318}

<iframe style="position: absolute; width: 100%; height: 100%; border: none" src='https://ecoquants.shinyapps.io/ohi-global/'></iframe>

*** 

<center>
![](https://ecoquants.com/images/app_ohi_card_300x300_100dpi.png)
</center>

`r icon("info")` **Background**. The Ocean Health Index quantifies sustainable use of the oceans globally across 10 broad goals ([Halpern, ..., Best et al 2012](https://www.nature.com/articles/nature11397)). This application helps users visualize the many levels of information as maps, goals as petals in the flower plot, time series and tables.

<center>
```{r}
modal_id("ohi_framework")
modal_btn("ohi_framework")
```
</center>

`r icon("rocket")` **Try it out**. Click on a country to freeze the flower plot to that country in the upper right and explore the country goal scores in the flower plot.

### Predict **cetacean densities** based on habitat {data-commentary-width=200} 

<iframe style="position: absolute; width: 100%; height: 100%; border: none" src='https://www.arcgis.com/apps/MapJournal/index.html?appid=0ac67160a23f45f6859401786f8bf94b'></iframe>

*** 

[Habitat-based cetacean density models for the U.S. Atlantic and Gulf of Mexico | Duke MGEL](http://seamap.env.duke.edu/models/Duke-EC-GOM-2015/)

Citation: Roberts JJ, Best BD, Mannocci L, Fujioka E, Halpin PN, Palka DL, Garrison LP, Mullin KD, Cole TVN, Khan CB, McLellan WM, Pabst DA, Lockhart GG (2016) [Habitat-based cetacean density models for the U.S. Atlantic and Gulf of Mexico](http://www.nature.com/articles/srep22615). _Scientific Reports_ 6: 22615. doi: 10.1038/srep22615. (Download)

tags: #sdg14 #decision-framework #whales #birds

### Report on UN SDG14 **Life in the Sea** {data-commentary-width=200} 

<iframe style="position: absolute; width: 100%; height: 100%; border: none" src='https://ecoquants.shinyapps.io/ohi-global/'></iframe>

*** 

The United Nation's **Sustainable Development Goal 14** Life in the Sea

tags: #sdg14 #decision-framework #whales #birds

### Monitor **ship speeds** to avoid whale strikes {data-commentary-width=200} 

<iframe style="position: absolute; width: 100%; height: 100%; border: none" src='http://ecoquants.com/ship-cards/'></iframe>

*** 

**Ship Cards** speeding through whale strike advisories

tags: #reporting #whales #shipping

### **Resources** {data-commentary-width=400} 

```{r map-all-end}
map_all(pts)
```

*** 

Here are a couple of the tools I use in R to create apps and generate reports.

#### Rmarkdown reports

```{r}
embed_vimeo(178485416, width=382)
```

#### Shiny applications

```{r}
vembedr::embed_vimeo(97466638, width=382)
```



